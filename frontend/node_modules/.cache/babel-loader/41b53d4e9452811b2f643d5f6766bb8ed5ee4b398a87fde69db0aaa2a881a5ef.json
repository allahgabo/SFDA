{"ast":null,"code":"/**\n * Fetches a PDF through the React proxy (/api/...) as a binary blob,\n * then triggers a real browser Save dialog.\n *\n * Why not just <a download>:\n *   href=\"http://localhost:8000/...\" is cross-origin from port 3000,\n *   so browsers silently ignore the `download` attribute and open the\n *   file directly (showing a browser icon instead of saving).\n *\n * This function uses the same-origin proxy path /api/... so the browser\n *  never sees a cross-origin URL, and the blob trick guarantees a save.\n */export async function downloadPDF(reportId){let filename=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const saveName=filename||\"SFDA_Report_\".concat(reportId,\".pdf\");try{const res=await fetch(\"/api/reports/\".concat(reportId,\"/pdf/\"));if(!res.ok)throw new Error(\"Server returned \".concat(res.status));const blob=await res.blob();const blobUrl=URL.createObjectURL(blob);const a=document.createElement('a');a.href=blobUrl;a.download=saveName;document.body.appendChild(a);a.click();document.body.removeChild(a);setTimeout(()=>URL.revokeObjectURL(blobUrl),10000);}catch(err){console.error('PDF download error:',err);alert(\"Could not download PDF: \".concat(err.message));}}","map":{"version":3,"names":["downloadPDF","reportId","filename","arguments","length","undefined","saveName","concat","res","fetch","ok","Error","status","blob","blobUrl","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","setTimeout","revokeObjectURL","err","console","error","alert","message"],"sources":["D:/New Project/milken_app/frontend/src/utils/downloadPDF.js"],"sourcesContent":["/**\n * Fetches a PDF through the React proxy (/api/...) as a binary blob,\n * then triggers a real browser Save dialog.\n *\n * Why not just <a download>:\n *   href=\"http://localhost:8000/...\" is cross-origin from port 3000,\n *   so browsers silently ignore the `download` attribute and open the\n *   file directly (showing a browser icon instead of saving).\n *\n * This function uses the same-origin proxy path /api/... so the browser\n *  never sees a cross-origin URL, and the blob trick guarantees a save.\n */\nexport async function downloadPDF(reportId, filename = null) {\n  const saveName = filename || `SFDA_Report_${reportId}.pdf`;\n  try {\n    const res = await fetch(`/api/reports/${reportId}/pdf/`);\n    if (!res.ok) throw new Error(`Server returned ${res.status}`);\n    const blob = await res.blob();\n    const blobUrl = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = blobUrl;\n    a.download = saveName;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    setTimeout(() => URL.revokeObjectURL(blobUrl), 10000);\n  } catch (err) {\n    console.error('PDF download error:', err);\n    alert(`Could not download PDF: ${err.message}`);\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,eAAe,CAAAA,WAAWA,CAACC,QAAQ,CAAmB,IAAjB,CAAAC,QAAQ,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CACzD,KAAM,CAAAG,QAAQ,CAAGJ,QAAQ,iBAAAK,MAAA,CAAmBN,QAAQ,QAAM,CAC1D,GAAI,CACF,KAAM,CAAAO,GAAG,CAAG,KAAM,CAAAC,KAAK,iBAAAF,MAAA,CAAiBN,QAAQ,SAAO,CAAC,CACxD,GAAI,CAACO,GAAG,CAACE,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,oBAAAJ,MAAA,CAAoBC,GAAG,CAACI,MAAM,CAAE,CAAC,CAC7D,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,GAAG,CAACK,IAAI,CAAC,CAAC,CAC7B,KAAM,CAAAC,OAAO,CAAGC,GAAG,CAACC,eAAe,CAACH,IAAI,CAAC,CACzC,KAAM,CAAAI,CAAC,CAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CACrCF,CAAC,CAACG,IAAI,CAAGN,OAAO,CAChBG,CAAC,CAACI,QAAQ,CAAGf,QAAQ,CACrBY,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,CAAC,CAAC,CAC5BA,CAAC,CAACO,KAAK,CAAC,CAAC,CACTN,QAAQ,CAACI,IAAI,CAACG,WAAW,CAACR,CAAC,CAAC,CAC5BS,UAAU,CAAC,IAAMX,GAAG,CAACY,eAAe,CAACb,OAAO,CAAC,CAAE,KAAK,CAAC,CACvD,CAAE,MAAOc,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,qBAAqB,CAAEF,GAAG,CAAC,CACzCG,KAAK,4BAAAxB,MAAA,CAA4BqB,GAAG,CAACI,OAAO,CAAE,CAAC,CACjD,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}